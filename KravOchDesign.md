

## üìö Ordlista (Glossary)

**Temporal Coupling:**
M√§ter hur ofta tv√• eller flera filer f√∂r√§ndras tillsammans i samma commit. H√∂g temporal koppling kan indikera dold beroendeproblematik eller bristande modul√§r design. *(Ej implementerad)*

**Change Coupling:**
Liknar temporal coupling men p√• funktionsniv√•: vilka funktioner f√∂r√§ndras ofta tillsammans? *(Ej implementerad)*

**Author Churn / Knowledge Map:**
M√§ter hur m√•nga olika utvecklare som har √§ndrat en fil eller modul. Filer med m√•nga olika f√∂rfattare kan vara sv√•rare att underh√•lla och ha h√∂gre risk f√∂r buggar. *(Ej implementerad)*

**Code Ownership:**
Andel av koden som skrivits av respektive utvecklare. L√•g √§garskap kan indikera risk f√∂r kunskapsspridning eller underh√•llsproblem. *(Ej implementerad)*

**Defect Density:**
Antal buggar eller felrapporter kopplade till en fil eller modul, ofta i relation till churn eller komplexitet. *(Ej implementerad)*

**Hotspot Evolution:**
Hur f√∂r√§ndras hotspots √∂ver tid? V√§xer de, minskar de, eller f√∂rblir de stabila? *(Ej implementerad)*

**Complexity Trend:**
Sp√•rar om komplexiteten i en fil eller modul √∂kar eller minskar √∂ver tid. *(Ej implementerad)*

**Code Age:**
Hur gammal √§r koden i en fil eller modul? Nyare kod kan vara mer instabil. *(Ej implementerad)*

**Test Coverage:**
Andel av koden som t√§cks av automatiska tester, g√§rna i relation till hotspots och churn. *(Ej implementerad)*

**Logical Coupling:**
Filer eller moduler som ofta f√∂r√§ndras tillsammans, √§ven om de inte √§r direkt beroende av varandra i koden. *(Ej implementerad)*

**KPI (Key Performance Indicator):**
En m√§tbar indikator som anv√§nds f√∂r att utv√§rdera kodens kvalitet, underh√•llbarhet och risk. Exempel: cyklomatisk komplexitet, code churn, hotspots. (Se "Your Code as a Crime Scene" f√∂r definitioner och anv√§ndning.)

**Cyklomatisk komplexitet (Cyclomatic Complexity):**
Ett m√•tt p√• den logiska komplexiteten i en funktion/metod, baserat p√• antalet oberoende v√§gar genom koden. H√∂g komplexitet indikerar √∂kad underh√•llskostnad och testbarhetsrisk. (Crime Scene: Kapitel 2)

**Code Churn:**
Antalet f√∂r√§ndringar (commits) som p√•verkat en fil eller funktion √∂ver tid. H√∂g churn kan indikera instabil eller riskfylld kod. (Crime Scene: Kapitel 3)

**Hotspot:**
Ett kodavsnitt (fil eller funktion) som kombinerar h√∂g komplexitet och h√∂g churn, vilket g√∂r det till en prioriterad kandidat f√∂r refaktorisering. (Crime Scene: Kapitel 4)

**ScanDir:**
En nod i katalogtr√§det som representerar en katalog och dess inneh√•ll, inklusive aggregerade KPI:er. (Crime Scene: Kapitel 5)

**RepoInfo:**
Rotnoden i analysen, representerar ett helt repository inklusive metadata och KPI:er p√• repo-niv√•. (Crime Scene: Kapitel 5)

**File:**
En enskild fil i analysen, med tillh√∂rande KPI:er och analysdata. (Crime Scene: Kapitel 5)

**Hotspot Score:**
Ett sammansatt m√•tt som ber√§knas som cyklomatisk komplexitet √ó churn, f√∂r att identifiera riskzoner i koden. (Crime Scene: Kapitel 4)

**LOC (Lines of Code):**
Antal rader kod i en fil eller funktion. Anv√§nds som grund f√∂r flera KPI:er. (Crime Scene: Kapitel 2)

**Parser:**
En komponent som tolkar k√§llkod f√∂r att extrahera metrikdata, t.ex. komplexitet eller funktioner. (Crime Scene: Kapitel 2)

**Dashboard:**
En visuell √∂versikt av KPI-resultat, ofta med diagram och f√§rgkodning f√∂r att snabbt identifiera risker. (Crime Scene: Kapitel 6)

**Crime Scene-principer:**
Metodiken och analysmodellerna fr√•n boken "Your Code as a Crime Scene" av Adam Tornhill, som ligger till grund f√∂r definitioner och tolkningar av KPI:er i detta projekt.

## Kravspec med datamodell

### Kravspec (Requirements)
- **KPI:er som objekt:** KPI:er ska vara egna objekt f√∂r att kunna b√§ra metadata (t.ex. enhet, beskrivning).
- **Ber√§kningslogik i KPI-klasser:** Varje KPI-klass ska implementera sin egen metod f√∂r att ber√§kna sitt v√§rde.
- **Resultat i KPI-objekt:** KPI-objekten ska inneh√•lla sitt ber√§knade resultat och eventuella delv√§rden som anv√§ndes f√∂r ber√§kningen.
- **Ignorera dolda filer/mappar:** Filer och mappar vars namn b√∂rjar med en punkt (`.`) ska ignoreras under skanningen.
- # üìê Kravst√§llning: Cyklomatisk komplexitet

## üéØ Syfte
M√§tning av cyklomatisk komplexitet ska ge en kvantitativ indikator p√• hur logiskt komplex en funktion eller metod √§r. M√•let √§r att identifiera kodavsnitt med h√∂g underh√•llskostnad, testbarhetsrisk eller refaktoreringsbehov.

---

## ‚úÖ Funktionella krav Cyklomatisk komplexitet

| ID     | Krav                                                                 | Beskrivning                                                                 |
|--------|----------------------------------------------------------------------|------------------------------------------------------------------------------|
| CC-01  | **Ber√§kna cyklomatisk komplexitet per funktion/metod**              | Systemet ska analysera varje funktion och ber√§kna dess komplexitet enligt McCabe‚Äôs definition: `M = E - N + 2P` |
| CC-02  | **St√∂d f√∂r flera spr√•k**                                            | Ber√§kningen ska fungera f√∂r spr√•ken i enlighet src/languages/config.py och parserklasserna i src/languages/parsers|
        |
| CC-03  | **Exportera komplexitet till rapport**                              | V√§rdet ska inkluderas i b√•de CLI-rapport och JSON-export som `cyclomatic_complexity` |
| CC-04  | **Markera h√∂ga v√§rden**                                             | Funktioner med komplexitet > 10 ska flaggas som potentiella hotspots        |
| CC-05  | **Koppla till churn och LOC**                                       | Komplexitet ska kombineras med churn och lines-of-code f√∂r att ber√§kna `hotspot_score` |
| CC-06  | **Anv√§nd befintlig struktur**                                       | Komplexitet ska ut√∂ka basklassen BaseKPI och ha ett dataobjekt som passar in i den definierade datastrukturen |

---

## üìä Icke-funktionella krav Cyklomatisk komplexitet

| ID      | Krav              | Beskrivning                                                                 |
|---------|-------------------|------------------------------------------------------------------------------|
| CC-N01  | **Prestanda**     | Analysen ska kunna k√∂ras p√• ett repo med 1000+ filer under 60 sekunder       |
| CC-N02  | **Noggrannhet**   | Ber√§kningen ska vara konsekvent med etablerade verktyg som Radon eller ESLint Complexity |
| CC-N03  | **Utbyggbarhet**  | Det ska vara enkelt att l√§gga till st√∂d f√∂r fler spr√•k via parser-moduler   |

---

# üîÅ Kravst√§llning: Code Churn

## üéØ Syfte
Code churn m√§ter hur ofta en fil eller funktion f√∂r√§ndras √∂ver tid. M√•let √§r att identifiera instabil kod, refaktoreringskandidater och potentiella riskomr√•den kopplat till frekventa √§ndringar.

---

## ‚úÖ Funktionella krav Code Churn

| ID     | Krav                                                   | Beskrivning                                                                 |
|--------|--------------------------------------------------------|------------------------------------------------------------------------------|
| CH-01  | **Ber√§kna churn per fil och funktion**                 | Systemet ska r√§kna antalet commits som p√•verkat varje fil och funktion      |
| CH-02  | **St√∂d f√∂r Git-baserad analys**                        | Churn ska ber√§knas utifr√•n Git-loggen, inte bara senaste diff               |
| CH-03  | **Exportera churn till rapport**                       | V√§rdet ska inkluderas i CLI-rapport och JSON-export som `churn`             |
| CH-04  | **Koppla till komplexitet och LOC**                    | Churn ska kombineras med `cyclomatic_complexity` och `lines_of_code` f√∂r att ber√§kna `hotspot_score` |
| CH-05  | **Visa churn √∂ver tid (valfritt)**                     | Systemet ska kunna visa churn per vecka/m√•nad f√∂r trendanalys *(valfritt)*  |
| CH-06  | **Anv√§nd befintlig struktur**                                       | Churn ska ut√∂ka basklassen BaseKPI och ha ett dataobjekt som passar in i den definierade datastrukturen |
---

## üìä Icke-funktionella krav Code Churn

| ID      | Krav              | Beskrivning                                                                 |
|---------|-------------------|------------------------------------------------------------------------------|
| CH-N01  | **Prestanda**     | Churn-analysen ska kunna k√∂ras p√• ett repo med 1000+ filer under 60 sekunder |
| CH-N02  | **Noggrannhet**   | Churn ska spegla verkliga commit-historiken och ignorera merge commits       |
| CH-N03  | **Utbyggbarhet**  | Det ska vara enkelt att l√§gga till st√∂d f√∂r churn per funktion via AST eller parser |

---

# üî• Kravst√§llning: Hotspotanalys

## üéØ Syfte
Hotspotanalys ska identifiera kodavsnitt med h√∂g teknisk risk baserat p√• kombinationen av komplexitet och f√∂r√§ndringsfrekvens. M√•let √§r att prioritera refaktoreringsinsatser och f√∂rb√§ttra kodens underh√•llbarhet.

---

## ‚úÖ Funktionella krav Hotspotanalys

| ID     | Krav                                                   | Beskrivning                                                                 |
|--------|--------------------------------------------------------|------------------------------------------------------------------------------|
| HS-01  | **Ber√§kna hotspot-score per funktion eller fil**       | Hotspot-score ska ber√§knas som: `hotspot_score = cyclomatic_complexity √ó churn` |
| HS-02  | **Exportera hotspot-score till rapporter**             | V√§rdet ska inkluderas i CLI-rapport och JSON-export som `hotspot_score`     |
| HS-03  | **Flagga h√∂griskkod**                                  | Funktioner med `hotspot_score > 300` ska markeras som refaktoreringskandidater |
| HS-04  | **St√∂d f√∂r sortering och filtrering**                  | CLI och JSON ska st√∂dja sortering och filtrering p√• `hotspot_score`         |
| HS-05  | **Visualisera hotspots i dashboard**                   | Hotspot-score ska kunna aggregeras och visualiseras per komponent, team eller repo |
| HS-06  | **Anv√§nd befintlig struktur**                                       | Komplexitet ska ut√∂ka basklassen BaseKPI och ha ett dataobjekt som passar in i den definierade datastrukturen |

---

## üìä Icke-funktionella krav Hotspotanalys

| ID      | Krav              | Beskrivning                                                                 |
|---------|-------------------|------------------------------------------------------------------------------|
| HS-N01  | **Prestanda**     | Hotspotanalysen ska kunna k√∂ras p√• ett repo med 1000+ filer under 60 sekunder |
| HS-N02  | **Noggrannhet**   | Ber√§kningen ska vara konsekvent och validerad mot etablerade metrikverktyg   |
| HS-N03  | **Utbyggbarhet**  | Det ska vara enkelt att justera tr√∂skelv√§rden och ber√§kningsformel via konfiguration |

---



# üì¶ Kravst√§llning: JSON-format f√∂r filanalys

## üéØ Syfte
JSON-formatet ska representera analysresultat f√∂r en hel fil, inklusive dess funktioner, metrikv√§rden och metadata. Formatet ska vara maskinl√§sbart, konsistent och kompatibelt med externa system som OpenSearch och dashboards.

---

## ‚úÖ Strukturkrav

### üìÅ Filniv√•
Varje JSON-objekt ska representera en fil och inneh√•lla f√∂ljande f√§lt:

| F√§lt                | Typ       | Beskrivning                                      |
|---------------------|-----------|--------------------------------------------------|
| `filename`          | `string`  | Full s√∂kv√§g till filen i repot                   |
| `repo_name`         | `string`  | Namn p√• repository (via CLI-flagga)              |
| `component`         | `string`  | Logisk komponent (via CLI-flagga)                |
| `team`              | `string`  | Ansvarigt team (via CLI-flagga)                  |
| `timestamp`         | `string`  | ISO 8601-tidpunkt f√∂r analys                     |
| `lines_of_code`     | `integer` | Totalt antal rader i filen                       |
| `churn`             | `integer` | Antal commits som p√•verkat filen                 |
| `functions`         | `array`   | Lista med analyserade funktioner/metoder         |

---

### üîß Funktionsniv√• (`functions[]`)
Varje funktion i `functions`-arrayen ska inneh√•lla:

| F√§lt                    | Typ       | Beskrivning                                      |
|-------------------------|-----------|--------------------------------------------------|
| `function_name`         | `string`  | Namn p√• funktionen/metoden                       |
| `cyclomatic_complexity` | `integer` | Ber√§knad komplexitet enligt McCabe               |
| `lines_of_code`         | `integer` | Antal rader i funktionen                         |
| `churn`                 | `integer` | Antal commits som p√•verkat funktionen            |
| `hotspot_score`         | `integer` | Ber√§knat som `complexity √ó churn`                |

---

## üìä Icke-funktionella krav

| ID      | Krav              | Beskrivning                                                                 |
|---------|-------------------|------------------------------------------------------------------------------|
| JF-N01  | **Validitet**     | JSON ska f√∂lja korrekt syntax och valideras mot schema                      |
| JF-N02  | **Konsistens**    | Alla f√§lt ska finnas √§ven om v√§rdet √§r `null` eller `0`                     |
| JF-N03  | **Utbyggbarhet**  | Formatet ska kunna ut√∂kas med Git- och Jira-KPI:er utan att bryta struktur  |

---

## üß™ Exempel p√• JSON-export

```json
{
  "filename": "src/core/engine.py",
  "repo_name": "MetricMancer",
  "component": "core",
  "team": "Platform",
  "timestamp": "2025-09-13T18:45:00Z",
  "lines_of_code": 120,
  "churn": 17,
  "functions": [
    {
      "function_name": "run_analysis",
      "cyclomatic_complexity": 9,
      "lines_of_code": 35,
      "churn": 12,
      "hotspot_score": 108
    },
    {
      "function_name": "export_results",
      "cyclomatic_complexity": 4,
      "lines_of_code": 20,
      "churn": 5,
      "hotspot_score": 20
    }
  ]
}


# üìÑ Kravst√§llning: HTML-rapport f√∂r KPI-analys

## üéØ Syfte
HTML-rapporten ska ge en √∂versk√•dlig, interaktiv och navigerbar presentation av KPI-resultat fr√•n MetricMancer. Rapporten ska best√• av en sammanfattande `index.html` samt en separat HTML-sida per analyserat repository. Varje sida ska inneh√•lla flikar f√∂r olika perspektiv och ha tydlig l√§nkning mellan rapportdelarna.

---

## ‚úÖ Strukturkrav

### üìÅ Filstruktur html-rapport

report/ 
‚îú‚îÄ‚îÄ index.html 
‚îú‚îÄ‚îÄ repo-1.html 
‚îú‚îÄ‚îÄ repo-2.html 
‚îú‚îÄ‚îÄ repo-N.html 
‚îî‚îÄ‚îÄ assets/
    ‚îî‚îÄ‚îÄ css, js, fonts, icons


---

### üìÑ index.html

| Element             | Beskrivning                                                                 |
|---------------------|------------------------------------------------------------------------------|
| Titel               | "MetricMancer Software KPI Report ‚Äì Overview"                               |
| Inneh√•ll            | Lista √∂ver alla analyserade repositories med l√§nkar till respektive rapport |
| Navigering          | L√§nkar till alla repo-sidor och till KPI Description                        |
| Layout              | Tydlig tabell eller kortvy med repo-namn, team, komponent, analysdatum      |
| **Analys√∂versikt**  | F√∂r varje repo ska en sammanfattning av `src/`-katalogens KPI-resultat visas: |
|                     | - Totalt antal funktioner analyserade                                       |
|                     | - Genomsnittlig cyklomatisk komplexitet                                     |
|                     | - Genomsnittlig churn                                                       |
|                     | - Antal identifierade hotspots                                              |
|                     | - L√§nk till repo-rapporten                                                  |
| Visualisering       | *(valfritt)* Diagram eller f√§rgkodning f√∂r att indikera riskniv√• per repo   |

---

### üìÑ repo-X.html

| Flik                | Beskrivning                                                                 |
|---------------------|------------------------------------------------------------------------------|
| **Software KPI Report** | Visar analysresultat f√∂r det specifika repot: komplexitet, churn, hotspots, KPI-grafer |
| **All Reports**     | Lista med hyperl√§nkar till alla andra repo-sidor (inkl. tillbaka till index) |
| **KPI Description** | Beskriver alla tillg√§ngliga KPI:er enligt principerna fr√•n *Your Code as a Crime Scene* |
| **Navigering**      | Alla flikar ska ha en l√§nk tillbaka till `index.html`                       |

---

### üß© Funktionella krav HTML-rapport

| ID     | Krav                                                   | Beskrivning                                                                 |
|--------|--------------------------------------------------------|------------------------------------------------------------------------------|
| HTML-01 | **Generera index.html automatiskt**                   | Indexsidan ska skapas dynamiskt utifr√•n vilka repos som analyserats         |
| HTML-02 | **Skapa en HTML-sida per repo**                       | Varje repo ska ha en egen rapportfil med flikstruktur                       |
| HTML-03 | **Flikarna ska vara interaktiva**                     | Anv√§nd t.ex. JavaScript eller CSS f√∂r att v√§xla mellan flikar utan omladdning |
| HTML-04 | **Hyperl√§nka mellan rapporter**                        | Fliken "All Reports" ska inneh√•lla l√§nkar till alla andra repo-sidor        |
| HTML-05 | **Beskriv KPI:er enligt Crime Scene-principer**       | Fliken "KPI Description" ska f√∂rklara varje KPI: syfte, ber√§kning, riskindikator |
| HTML-06 | **L√§nk tillbaka till index.html fr√•n alla flikar**    | Varje flik ska ha en tydlig "Back to Overview" eller liknande l√§nk          |

---

### üìä Icke-funktionella krav html-rapport

| ID      | Krav              | Beskrivning                                                                 |
|---------|-------------------|------------------------------------------------------------------------------|
| HTML-N01 | **Responsiv design** | Rapporten ska fungera p√• b√•de desktop och mobil                            |
| HTML-N02 | **Laddningstid**     | Varje sida ska laddas under 2 sekunder lokalt                             |
| HTML-N03 | **Tillg√§nglighet**   | Rapporten ska vara l√§sbar utan JavaScript (grundl√§ggande fallback)        |
| HTML-N04 | **Utbyggbarhet**     | Nya KPI:er ska kunna l√§ggas till utan att bryta layout eller navigation    |

---

## üì¶ Exempel p√• flikstruktur (repo-X.html)

‚îÇ Software KPI Report ‚îÇ All Reports ‚îÇ KPI Description ‚îÇ
 ‚¨Ö Back to Overview ‚îÇ


# üñ•Ô∏è Kravst√§llning: CLI-rapport med tabell- och tr√§dvy

## üéØ Syfte
CLI-rapporten ska ge en √∂versk√•dlig och l√§ttl√§st sammanst√§llning av analysresultatet direkt i terminalen. Anv√§ndaren ska kunna v√§lja mellan en **tabellvy** f√∂r detaljerad j√§mf√∂relse och en **tr√§dvy** f√∂r strukturell √∂versikt av kodbasen.

---

## ‚úÖ Funktionella krav

| ID     | Krav                                                   | Beskrivning                                                                 |
|--------|--------------------------------------------------------|------------------------------------------------------------------------------|
| CLI-01 | **Standardrapport ska vara tabellvy**                  | Utan flaggor ska CLI visa en formaterad tabell med filnamn, funktion, komplexitet, churn, hotspot-score |
| CLI-02 | **St√∂d f√∂r `--view tree`**                             | Flaggan ska visa analysresultatet i tr√§dstruktur, likt `tree`, d√§r varje fil √§r en nod och funktioner √§r underliggande blad |
| CLI-03 | **St√∂d f√∂r `--view table`**                            | Flaggan ska explicit v√§lja tabellvy, √§ven om det √§r default, f√∂r tydlighet i skript |
| CLI-04 | **St√∂d f√∂r `--output-format json`**                    | Flaggan ska generera en strukturerad JSON-rapport f√∂r integration med externa system |
| CLI-05 | **St√∂d f√∂r `--output-format machine`**                 | Flaggan ska generera en minimal, radbaserad rapport f√∂r shell-script och CI-pipelines |
| CLI-06 | **St√∂d f√∂r metadata-flaggor**                          | CLI ska kunna ta emot `--repo-name`, `--component`, `--team` och inkludera dessa i rapporten |
| CLI-07 | **St√∂d f√∂r f√§rgkodning (valfritt)**                    | Tabell- och tr√§dvy kan f√§rgkoda h√∂ga v√§rden f√∂r snabb visuell identifiering *(valfritt)* |

---

## üìä Icke-funktionella krav

| ID      | Krav              | Beskrivning                                                                 |
|---------|-------------------|------------------------------------------------------------------------------|
| CLI-N01 | **Prestanda**     | Rapporten ska genereras under 2 sekunder f√∂r 1000+ funktioner                |
| CLI-N02 | **Konsistens**    | Alla vyer ska inneh√•lla samma datainneh√•ll                                  |
| CLI-N03 | **Utbyggbarhet**  | Nya f√§lt (t.ex. Git- eller Jira-KPI:er) ska kunna l√§ggas till utan att bryta rapportformaten |
| CLI-N04 | **Tillg√§nglighet**| Rapporten ska vara l√§sbar i b√•de f√§rgade och of√§rgade terminaler             |

---

## üì¶ Exempel p√• tabellvy

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê 
‚îÇ Reponame                   ‚îÇ                    ‚îÇ avg. CC‚îÇ avg. LOC‚îÇ avg. Func‚îÇ avg. Churn ‚îÇ avg. Hotspot Score ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ myrepo                     ‚îÇ                    ‚îÇ 7      ‚îÇ 9       ‚îÇ 2        ‚îÇ 64         ‚îÇ 526                ‚îÇ 
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº-‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 
‚îÇ Filename                   ‚îÇ Function           ‚îÇ CC     ‚îÇ LOC     ‚îÇ LOC      ‚îÇ Churn      ‚îÇ Hotspot Score      ‚îÇ 
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº-‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 
‚îÇ src/core/engine.py         ‚îÇ run_analysis       ‚îÇ 9      ‚îÇ 12      ‚îÇ 12       ‚îÇ 108        ‚îÇ 972                ‚îÇ 
| src/core/engine.py         ‚îÇ export_results     ‚îÇ 4      ‚îÇ 5       ‚îÇ 5        ‚îÇ 20         ‚îÇ 80                 ‚îÇ   
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò 


---

## üì¶ Exempel p√• tr√§dvy (`--view tree`)

src/ 
‚îî‚îÄ‚îÄ core/ 
    ‚îî‚îÄ‚îÄ engine.py [Func: 2, CC: 25, Churn: 17, Score: 120]
    |   ‚îú‚îÄ‚îÄ run_analysis [CC: 9, Churn: 12, Score: 108] 
    |   ‚îî‚îÄ‚îÄ export_results [CC: 4, Churn: 5, Score: 20]


## Datamodell

### ScanDir
Klass: ScanDir
Syfte
ScanDir ska representera en katalog inom ett repository som har analyserats. Den ska fungera som en rekursiv nod i katalogtr√§det och inneh√•lla information om filer, underkataloger och aggregerade KPI:er.

Funktionella krav
Ska inneh√•lla katalogens namn (dir_name) och dess relativa s√∂kv√§g fr√•n repository-roten (scan_dir_path)

Ska kunna lagra en upps√§ttning filer i form av File-objekt, indexerade per filnamn

Ska kunna lagra underkataloger som egna ScanDir-instanser, indexerade per katalognamn

Ska kunna inneh√•lla KPI:er p√• katalogniv√•, t.ex.. genomsnittlig komplexitet eller total churn

Ska st√∂dja rekursiv traversering av katalogstrukturen f√∂r rapportering och visualisering

F√§lt
python
dir_name: str
scan_dir_path: str
files: Dict[str, File]
scan_dirs: Dict[str, ScanDir]
kpis: Dict[str, BaseKPI]

### File
Klass: File
Syfte
File ska representera en enskild fil inom en katalog som har analyserats. Den ska inneh√•lla filens relativa s√∂kv√§g och dess tillh√∂rande KPI:er.

Funktionella krav
Ska inneh√•lla filens relativa s√∂kv√§g fr√•n katalogen (file_path)

Ska kunna lagra en upps√§ttning KPI:er som g√§ller f√∂r filen, t.ex.. komplexitet, churn, LOC och hotspot-score

Ska vara l√§tt att serialisera till JSON och integrera i rapportstrukturer

F√§lt
python
file_path: str
kpis: Dict[str, BaseKPI]

### RepoInfo
Klass: RepoInfo
Syfte
RepoInfo ska representera ett helt repository som har analyserats. Den fungerar som rot i katalogtr√§det och inneh√•ller b√•de strukturell information (via arv fr√•n ScanDir) och metadata som √§r specifik f√∂r ett Git-repo. Klassen anv√§nds som ing√•ngspunkt f√∂r rapportgenerering, visualisering och sammanst√§llning av KPI:er p√• repo-niv√•.

Funktionella krav
Ska √§rva alla f√§lt och beteenden fr√•n ScanDir, inklusive st√∂d f√∂r rekursiv katalogstruktur, filer och KPI:er.

Ska inneh√•lla ett identifierande namn f√∂r repot (repo_name).

Ska inneh√•lla absolut s√∂kv√§g till repository-roten (repo_root_path).

Ska kunna flaggas som ett Git-repo via is_git_repo, vilket m√∂jligg√∂r s√§rskild hantering av commit-historik och versionsdata.

Ska fungera som toppnod i datamodellen och kunna serialiseras till JSON, HTML och andra rapportformat.

Ska kunna aggregera KPI:er fr√•n underliggande kataloger och filer f√∂r sammanfattning p√• repo-niv√•.

F√§lt
python
class RepoInfo(ScanDir):
    repo_name: str                      # Namn p√• repot
    repo_root_path: str                 # Absolut s√∂kv√§g till repot
    is_git_repo: bool = True            # Flagga som indikerar att detta √§r ett Git-repo
Arv fr√•n ScanDir
Eftersom RepoInfo √§rver fr√•n ScanDir, har den automatiskt tillg√•ng till:

dir_name och scan_dir_path (kan s√§ttas till exempelvis ".")

files: alla filer direkt under repo-roten

scan_dirs: underkataloger som exempelvis "src", "tests", "docs"

kpis: KPI:er p√• repo-rotniv√•, exempelvis total komplexitet, antal hotspots, genomsnittlig churn


### UML-diagram (PlantUML)

```plantuml
@startuml
class BaseKPI {
  +name: str
  +description: str
  +value: Any
}

class File {
  +file_path: str
  +kpis: Dict[str, BaseKPI]
}

class ScanDir {
  +dir_name: str
  +scan_dir_path: str
  +files: Dict[str, File]
  +scan_dirs: Dict[str, ScanDir]
  +kpis: Dict[str, BaseKPI]
}

class RepoInfo {
  +repo_name: str
  +repo_root_path: str
  +is_git_repo: bool
}

RepoInfo --|> ScanDir
ScanDir "1" o-- "*" File
ScanDir "1" o-- "*" ScanDir
File "1" o-- "*" BaseKPI
ScanDir "1" o-- "*" BaseKPI
RepoInfo "1" o-- "*" BaseKPI
@enduml
```